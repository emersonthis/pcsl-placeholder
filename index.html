<!DOCTYPE html>
<html>
  <head>
    <title>Portland Squash</title>
    <style>
      :root {
        --red: #cd0100;
        --peach: #e7c9a9;
      }
      html {
        background-color: var(--peach);
        font-size: 20px;
        margin: 0;
      }
      body {
        font-family: sans-serif;
        margin: 0;
        line-height: 1.3;
      }
      .container {
        padding: 2em;
        max-width: 800px;
        margin: 0 auto;
      }
      a {
        color: var(--red);
      }
      h1 {
        display: inline-block;
        margin-bottom: 0;
        font-size: 2em;
        border-bottom-style: solid;
        border-bottom-color: var(--red);
        border-bottom-width: 4px;
      }
      p {
        font-size: 1.2em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Welcome to Portland Squash!</h1>
      <p>A fancier site is in the works&hellip;</p>
      <p>
        The <strong><a href="https://www.rallypal.net/leagues/1/">Portland City Squash League</a></strong> is currently managed on the
        RallyPal platform.
        If you want to play in the League, register a free account and
        enroll in an upcoming season</a
        >.
      </p>
      <p>
        If you have any questions or you want to join our
        mailing list to hear about everything to do with Portland squash
        leagues, tournaments, events, please send us an email at:
        <a href="mailto:squashportland@gmail.com">squashportland@gmail.com</a>
      </p>
    </div>

    <script>
      // Function to unregister service workers
      async function unregisterServiceWorkers() {
        try {
          // First, check if service workers are supported
          if (!('serviceWorker' in navigator)) {
            console.log('Service workers not supported');
            return;
          }

          // Get all service worker registrations
          const registrations = await navigator.serviceWorker.getRegistrations();

          if (registrations.length === 0) {
            console.log('No service workers found');
            return;
          }

          // Unregister each service worker
          const results = await Promise.all(
            registrations.map(async (registration) => {
              const scope = registration.scope;
              const success = await registration.unregister();
              console.log(
                `Service worker with scope ${scope} unregistered:`,
                success
              );
              return success;
            })
          );

          // Check if all service workers were successfully unregistered
          const allUnregistered = results.every(Boolean);
          if (allUnregistered) {
            console.log('All service workers successfully unregistered');
            // Force reload the page to ensure the service worker is completely removed
            window.location.reload(true);
          } else {
            console.warn('Some service workers failed to unregister');
          }
        } catch (error) {
          console.error('Error during service worker unregistration:', error);
        }
      }

      // Wait for the page to load before attempting to unregister service workers
      window.addEventListener('load', unregisterServiceWorkers);
    </script>
  </body>
</html>